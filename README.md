# PBS任务提交脚本

为PBS任务提交提供一个统一的入口和可扩展框架。
脚本主要实现以下功能特性:

- 参数检查，让用户能够在任务提交前前发现自己的输入参数问题。防止发生一些意想不到的情况
- 许可服务器检查以及选择
- 更智能的资源分配，可以根据当前的队列使用情况动态扩展申请的资源量
- 若干小工具，比如查询队列空闲cpu等。更易于使用

## 安装准备

- 因为默认的运行脚本目录是在software目录下面，因此需要将该脚本放置到所有hpc都能访问的共享存储上
- 需要创建/var/log/pbs_sub目录，并设置权限为777
- 需要安装pbs的client。既需要安装qstat qsub，pbsnodes等命令
- 需要安装requirements库


## 如何使用

这是一个纯命令行工具。参数分为两个层次：

- 公共参数：在所有的软件中都有效
- 私有参数：只在对应的软件扩展下生效

大致格式为./pbs_sub.py [公共参数] 软件名称 [私有参数]

可以使用
```bash
./pbs_sub.py -h
```
打印所有的公共参数说明，以及支持的软件列表和对应的脚本版本, 以及一些工具命令。


```bash
./pbs_sub.py
```
打印出当前pbs运行的统计信息

使用
```bash
./pbs_sub.py SOFTWARE -h
```
打印对应的软件的的使用说明


## 开发者文档

[开发者参考](DEVLOPER_DOC.md)
